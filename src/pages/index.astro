---
import Layout from '../layouts/Layout.astro';
import { Carousel } from '../components/Carousel';
import fs from 'node:fs';
import path from 'node:path';

// Get images from public/carousel
const carouselDir = path.join(process.cwd(), 'public', 'carousel');
let carouselImages: string[] = [];

try {
  if (fs.existsSync(carouselDir)) {
    carouselImages = fs.readdirSync(carouselDir)
      .filter(file => /\.(jpg|jpeg|png|webp|gif)$/i.test(file))
      .map(file => `/carousel/${file}`);
  }
} catch (e) {
  console.error("Error reading carousel images:", e);
}
---

<Layout title="The World according to Me">
	<header class="mb-8 text-center">
		<h1 class="text-3xl font-bold mb-4">Maps and stuff</h1>
	</header>

	<div class="mb-12">
		<Carousel client:load images={carouselImages} />
	</div>
</Layout>
